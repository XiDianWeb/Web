# Web应用性能和可用性分析
## 一、web性能分析
- 性能指标

> Web性能测试的部分概况一般来说，一个Web请求的处理包括以下步骤：
（1）客户发送请求
（2）web server 接受到请求，进行处理；
（3）web server 向DB获取数据；
（4）web server生成用户的object(页面)，返回给用户。给客户发送请求开始到最后一个字节的时间称为响应时间（第三步不包括在每次请求处理中）。

我们在以下八个方面对我们大学职业规划这个网站的性能进行了测试，并且进行了一些改进的措施以提高我们网站的性能：
1. 事务（Transaction）

事务的测试大致是这样一个“从用户发送请求->web server接受到请求，进行处理-> web server向DB获取数据->生成用户的object(页面)，返回给用户”的过程，一般的响应时间都是针对事务而言的。

2. 请求响应时间

请求响应时间指的是从客户端发起的一个请求开始，到客户端接收到从服务器端返回的响应结束，这个过程所耗费的时间,意思是从发起一个请求开始，到客户端接收到最后一个字节的响应所耗费的时间，响应时间的单位一般为“秒”或者“毫秒”。一个公式可以表示：响应时间＝网络响应时间+应用程序响应时间。

3. 事务响应时间

事务可能由一系列请求组成,事务的响应时间主要是针对用户而言,属于宏观上的概念，是为了向用户说明业务响应时间而提出的.例如:申请做教师直播响应时间就是由一系列的请求组成的.事务响应时间是直接衡量系统性能的参数.

4. 并发用户数

并发一般分为2种情况。一种是严格意义上的并发，即所有的用户在同一时刻做同一件事情或者操作，这种操作一般指做同一类型的业务。比如在学习路线制定业务中，一定数目的用户在同一时刻对已经完成的制定方案进行提交；还有一种特例，即所有用户进行完全一样的 操作，例如在请求与HR交流业务中，所有的用户可以一起申请业务。

5. 吞吐量

指的是在一次性能测试过程中网络上传输的数据量的总和.吞吐量/传输时间,就是吞吐率.

6. TPS（transaction per second）

每秒钟系统能够处理的交易或者事务的数量.它是衡量系统处理能力的重要指标.

7. 点击率

每秒钟用户向WEB服务器提交的HTTP请求数.这个指标是WEB应用特有的一个指标:WEB应用是"请求-响应"模式,用户发出一次申请,服务器就要处理一次,所以点击是WEB应用能够处理的交易的最小单位.如果把每次点击定义为一个交易,点击率和TPS就是一个概念.容易看出,点击率越大,对服务器的压力越大.点击率只是一个性能参考指标,重要的是分析点击时产生的影响。需要注意的是,这里的点击并非指鼠标的一次单击操作,因为在一次单击操作中,客户端可能向服务器发出多个HTTP请求.

8. 资源利用率

指的是对不同的系统资源的使用程度,例如服务器的CPU利用率,磁盘利用率等.资源利用率是分析系统性能指标进而改善性能的主要依据,因此是WEB性能测试工作的重点.

- 可采取的策略

建议一、利用反向代理服务器加速和保护应用

如果 Web 应用运行在一台独立的电脑上，性能问题的解决方案是显而易见的：换一台更快的电脑，里面加上更多的处理器、内存、快速磁盘阵列等等。
但电脑速度可能不是问题所在。通常 Web应用运行缓慢，是由于电脑一直在不同的任务间切换：同成千上万的客户交互、访问磁盘上的文件、执行应用代码和其它的任务。应用服务器可能会因为下面这些问题而崩溃 —— 内存耗尽、把很多的数据从内存交换到磁盘上、以及很多请求都在等待一个类似磁盘 I/O 的单个任务。通过增加一个反向代理服务器来分担这些任务。这台反向代理服务器设置在运行应用的电脑之前，用来处理网络流量。只有这台反向代理服务器直接连到网络上，它和应用服务器通过一个快速的内部网络进行通信。利用这台反向代理服务器，应用服务器就不用等着和应用的用户进行交互，它可以专注在建立网页，并通过反向代理服务器把它们发送到网络上。因为应用服务器不必再等待客户的响应，所以能以最优的速度运行。

建议二、增加一个负载均衡器

增加一个负载均衡器是一个相对简单的改动，而且会大幅度地改善网站的性能和安全性。你可以利用负载均衡器把业务分配给一些服务器，而不是建造一台更大更强的 Web 核心服务器。就算应用程序编写得很烂或者扩展性很差，负载均衡器都能提升用户体验而不需要任何其它的改动。

建议三、缓存静态和动态内容

缓存通过更快地向客户端提供内容来改善web应用的性能。缓存包含一些策略：对内容预处理以便更快地发布、在更快的设备上保存内容、在更靠近客户端的地方保存内容，或者上述方法的组合。有两种不同类型的缓存需要考虑：静态内容的缓存。不经常变化的文件，比如图像文件（JPEG，PNG）和代码文件（CSS，JavaScript），可以存在一个边缘服务器上，以便在内存或磁盘上进行快速检索。动态内容的缓存。很多web应用为每个页面请求生成新的HTML。通过简单地将已经生成HTML的副本保存一小段时间，就可以大幅度减少需要生成页面的总数，发布这些已经生成的 HTML 副本已经足够满足需求了。

建议四、压缩数据

压缩是一个有巨大潜能的性能加速器。已经有很多精心设计和高效的压缩标准，有针对图像的、视频的（MPEG-4）、音乐的（MP3）等等。这些标准都可以大幅减少文件的大小。文本数据 —— 包含 HTML（包含了纯文本和HTML标签）、CSS和类似JavaScript的代码，这些数据通常不经过压缩就进行传输了。压缩这些数据会大大改善对 Web 应用性能的体验，特别是那些连接缓慢或受限的移动客户端。

建议五、更新软件版本

一个提升应用性能的简单方法，就是为软件技术栈选择稳定的、性能好的组件。此外，高质量组件的程序员愿意加班追求性能的提升和尽快修正bug，所以最好使用软件最新的稳定版本。新的发布会得到程序员和用户社区的更多关注。新版本还会利用最新的编译器优化技术，包含对新硬件的优化。

建议六、监控实时活动来解决问题和瓶颈

开发和发布高性能应用的关键，在于密切和实时地关注应用程序在现实情况下的性能。你必须能够监控特定设备的活动和网站的基础设施。大多数监控网站的活动都很被动 —— 它只告诉你将会发生什么，让你自己去发现问题和解决问题。监控可以抓到不同类型的问题。它们包含：
服务器宕机。
服务器不稳定，容易掉线。
服务器大概率出现缓冲失效。
服务器发送的内容不正确。

## 可用性分析
> 可用性简单的说就是强调优越的用户体验，一切为了用户，为了一切用户，为了用户的一切。ISO对可用性的定义是一个产品被特定的用户在特定的环境下完成特定的任务的效率和用户的满意程度。而webusability/accessibility指网站的页面对用户的友好性，页面上的整洁大方、应用的易理解、明确的任务导向。

- 可用性的现状和问题
1. 主页上包含太多的图片、flash，使访问者不得不等待更多的时间才能看到主页上的全部内容。
2. 网页上充满大量密集的文字，使访问者很难轻松的定位和提取有用的信息。
3. 有些网站的字体模糊，很难辨认和阅读。
4. 网站提供的媒体内容要求访问者必须安装最新版本的插件才能观看，使得访问者只能望洋兴叹。
5. 网站信息组织混乱，访问者无法快速、准确的找到所需信息。
6. 网站上充满了与网站主题无关的内容。
7. 网站上没有与访问者交流的渠道，访问者的意见和建议无法表达。
8. 网站上的信息早已过时。
9. 网站上提供的咨询与媒体提供的不一致，让访问者迷惑。

- 面对可用性的现状和问题，我们在我们大学生职业规划这个网站上采取了以下策略：
1. 尽量避免大量使用flash
2. 网站设计要美观、大方
3. 重点突出
4. 明确、清晰的导航
5. 确保网站保持良好的下载速度
6. 使用基于可信性的设计：快速、没有错误并且有吸引力
7. 在最好的位置放最后的内容
8. 使用交互元素来吸引客户
9. 加强网站内容的可读性：
使用合适的字号；使用适合的字体并保证整个网页使用一致的字体类型；避免使用长句，尽量将长句缩短或分成几句话表达意思；避免使用静态的重复的图片作为背景图片；使用恰当的网页标题，合理牌链接；保持网页内容的融会贯通，并保证要点清晰突出；避免夸大其词，保持网页内容的客观性。
10. 正式发布之前对网站进行全面测试：
测试过程中有必要认真收集诸如网站下载时间、导航、网页可用性、网页内容、浏览器兼容性等数据。
11. 定期检测网站服务器日志数据：
访问者通常是在非常随意的状态下快速浏览你的站点的。他们急于获取真实的、实用的，并且有价值的信息。

